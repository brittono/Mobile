var Canvas2Image=function(){var t=!1,r=document.createElement("canvas");if(r.getContext("2d")&&(t=!0),!t)return{saveAsBMP:function(){},saveAsPNG:function(){},saveAsJPEG:function(){}};var e=!!r.getContext("2d").getImageData,a=!!r.toDataURL,h=!!window.btoa,o=function(t){var r=parseInt(t.width),e=parseInt(t.height);return t.getContext("2d").getImageData(0,0,r,e)},n=function(t){var r="";if("string"==typeof t)r=t;else for(var e=t,a=0;a<e.length;a++)r+=String.fromCharCode(e[a]);return btoa(r)},u=function(t){var r=[],e=t.width,a=t.height;r.push(66),r.push(77);var h=e*a*3+54;r.push(h%256),h=Math.floor(h/256),r.push(h%256),h=Math.floor(h/256),r.push(h%256),h=Math.floor(h/256),r.push(h%256),r.push(0),r.push(0),r.push(0),r.push(0),r.push(54),r.push(0),r.push(0),r.push(0);var o=[];o.push(40),o.push(0),o.push(0),o.push(0);var u=e;o.push(u%256),u=Math.floor(u/256),o.push(u%256),u=Math.floor(u/256),o.push(u%256),u=Math.floor(u/256),o.push(u%256);var s=a;o.push(s%256),s=Math.floor(s/256),o.push(s%256),s=Math.floor(s/256),o.push(s%256),s=Math.floor(s/256),o.push(s%256),o.push(1),o.push(0),o.push(24),o.push(0),o.push(0),o.push(0),o.push(0),o.push(0);var p=e*a*3;o.push(p%256),p=Math.floor(p/256),o.push(p%256),p=Math.floor(p/256),o.push(p%256),p=Math.floor(p/256),o.push(p%256);for(var i=0;i<16;i++)o.push(0);var f=(4-3*e%4)%4,g=t.data,c="",v=a;do{for(var m=e*(v-1)*4,d="",l=0;l<e;l++){var C=4*l;d+=String.fromCharCode(g[m+C+2]),d+=String.fromCharCode(g[m+C+1]),d+=String.fromCharCode(g[m+C])}for(var M=0;M<f;M++)d+=String.fromCharCode(0);c+=d}while(--v);return n(r.concat(o))+n(c)},s=function(t){document.location.href=t},p=function(t,r){return"data:"+r+";base64,"+t},i=function(t){var r=document.createElement("img");return r.src=t,r},f=function(t,r,e){if(r&&e){var a=document.createElement("canvas");a.width=r,a.height=e,a.style.width=r+"px",a.style.height=e+"px";return a.getContext("2d").drawImage(t,0,0,t.width,t.height,0,0,r,e),a}return t};return{saveAsPNG:function(t,r,e,h){if(!a)return!1;var o=f(t,e,h),n=o.toDataURL("image/png");return r?i(n):(s(n.replace("image/png","image/octet-stream")),!0)},saveAsJPEG:function(t,r,e,h){if(!a)return!1;var o=f(t,e,h),n=o.toDataURL("image/jpeg");return 5==n.indexOf("image/jpeg")&&(r?i(n):(s(n.replace("image/jpeg","image/octet-stream")),!0))},saveAsBMP:function(t,r,a,n){if(!e||!h)return!1;var g=f(t,a,n),c=o(g),v=u(c);return r?i(p(v,"image/bmp")):(s(p(v,"image/octet-stream")),!0)}}}();
//# sourceMappingURL=canvas2image.min.js.map
